"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var path_1 = require("path");
var grammar_1 = require("../lib/grammar");
var host_1 = require("../lib/host");
var resources_1 = require("./resources");
var diff_1 = require("./diff");
var prex_1 = require("prex");
var chai_1 = require("chai");
describe("Checker", function () {
    defineTests();
    it("cancelable", function () {
        var cts = new prex_1.CancellationTokenSource();
        var grammar = new grammar_1.Grammar(["cancelable.grammar"], {}, host_1.Host.getHost({
            readFile: function (file) { return ""; }
        }), /*oldGrammar*/ undefined, cts.token);
        cts.cancel();
        chai_1.assert.throws(function () { return grammar.check(/*sourceFile*/ undefined); });
    });
    function defineTests() {
        for (var _i = 0, _a = resources_1.getGrammarFiles(); _i < _a.length; _i++) {
            var file = _a[_i];
            defineTest(path_1.basename(file), file);
        }
    }
    function defineTest(name, file) {
        it(name + " diagnostics", function () {
            var grammar = new grammar_1.Grammar([file]);
            grammar.check(/*sourceFile*/ undefined);
            diff_1.compareBaseline(diff_1.writeDiagnostics(name, grammar.diagnostics));
        });
    }
});
//# sourceMappingURL=checker-tests.js.map
